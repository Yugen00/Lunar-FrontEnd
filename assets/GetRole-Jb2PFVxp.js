import{u as E,r as n,j as e,s as D,c as I}from"./index-BYU8P2V-.js";import{L as J}from"./Loader-ZzwXNXO0.js";import{C as H,h as C}from"./CLoader-9mHpOnMO.js";import{D as z}from"./DeleteItem-BftNn56D.js";function K({setOriginalData:m,setInsertModalOpen:s}){const a=E(),[h,r]=n.useState(!1),[o,x]=n.useState([]),c=N=>{x({...o,[N.target.name]:N.target.value})},f=async N=>{if(N.preventDefault(),!o.RoleName.trim()||!o.Remarks.trim()){D("Missing field are required!","error");return}try{r(!0);const p=await I.post("/role/insert",o);if(p.status==200){const S=await p.data;m(g=>[...g,S]),s(!1),D("Role Inserted Successfully","success")}}catch(p){C(p,a)}finally{r(!1)}};return e.jsx(e.Fragment,{children:e.jsx("div",{className:"fixed inset-0 z-20 bg-black bg-opacity-75 flex justify-center items-center",children:e.jsx("div",{className:"flex mx-auto w-full justify-center",children:e.jsxs("div",{className:"w-full border sm:max-w-xl bg-white border-indigo-400 m-4 p-4 sm:m-10",children:[e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{className:"close-btn text-2xl text-indigo-700 font-extrabold hover:text-red-300",onClick:()=>s(!1),children:"X"})}),e.jsxs("div",{className:"mt-4",children:[e.jsx("h1",{className:"text-2xl font-bold text-center text-gray-800 mb-6",children:"Insert Role"}),e.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{htmlFor:"RoleName",className:"block text-lg font-medium text-gray-800 mb-1",children:"Role Name"}),e.jsx("input",{type:"text",id:"RoleName",name:"RoleName",onChange:c,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:border-indigo-100",required:!0})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{htmlFor:"Remarks",className:"block text-lg font-medium text-gray-800 mb-1",children:"Remarks"}),e.jsx("input",{type:"text",id:"Remarks",name:"Remarks",onChange:c,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:border-indigo-100",required:!0})]}),e.jsxs("div",{className:"md:col-span-2 flex flex-wrap justify-end gap-4",children:[e.jsx("button",{type:"reset",className:"px-6 py-3 bg-red-700 text-white text-sm rounded-lg shadow-lg hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 transition-all duration-300",children:"Clear"}),h?e.jsx(H,{}):e.jsx("button",{type:"submit",onClick:f,className:"px-6 py-3 bg-blue-900 text-white text-sm rounded-lg shadow-lg hover:bg-green-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-all duration-300",children:"Insert"})]})]})]})]})})})})}function X({handleSeeAllModal:m,data:s,index:a}){return e.jsx(e.Fragment,{children:e.jsx("div",{className:"fixed inset-0 z-20 bg-black bg-opacity-75 flex justify-center items-center",children:e.jsxs("div",{className:"p-6 m-4 sm:max-w-[50%] sm:min-w-[30%] bg-white border rounded-lg shadow-md hover:shadow-lg transition-all duration-300 ",children:[e.jsx("div",{className:"flex justify-end -mt-4",children:e.jsx("button",{className:"text-2xl text-indigo-700 font-extrabold hover:text-red-300",onClick:m,children:"X"})}),e.jsx("h3",{className:"text-2xl font-semibold text-gray-800",children:`${a+1}.   ${s.RoleName}`}),e.jsxs("p",{className:"text-gray-600 mt-2",children:[e.jsx("b",{children:"Remarks:"})," ",s==null?void 0:s.Remarks]}),e.jsx("div",{className:"mt-4 flex justify-center",children:e.jsx("span",{className:`inline-block px-4 py-1 rounded-full text-white text-sm font-medium ${s.IsActive?"bg-green-500":"bg-red-500"}`,children:s.IsActive?"Active":"Blocked"})})]})})})}function Q({handleEditModal:m,data:s,updateHandle:a,isBeingProcessed:h}){const[r,o]=n.useState(s),x=f=>{o({...r,[f.target.name]:f.target.value})},c=f=>{f.preventDefault(),a(r)};return e.jsx(e.Fragment,{children:e.jsx("div",{className:"fixed inset-0 z-20 bg-black bg-opacity-75 flex justify-center items-center",children:e.jsx("div",{className:"flex mx-auto w-full justify-center",children:e.jsxs("div",{className:"w-full border sm:max-w-xl bg-white border-indigo-400 m-4 p-4 sm:m-10",children:[e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{className:"close-btn text-2xl text-indigo-700 font-extrabold hover:text-red-300",onClick:m,children:"X"})}),e.jsxs("div",{className:"mt-4",children:[e.jsx("h1",{className:"text-2xl font-bold text-center text-gray-800 mb-6",children:"Update Role"}),e.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{htmlFor:"RoleName",className:"block text-lg font-medium text-gray-800 mb-1",children:"Role Name"}),e.jsx("input",{type:"text",id:"RoleName",name:"RoleName",value:r==null?void 0:r.RoleName,onChange:x,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:border-indigo-100",required:!0})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{htmlFor:"Remarks",className:"block text-lg font-medium text-gray-800 mb-1",children:"Remarks"}),e.jsx("input",{type:"text",id:"Remarks",name:"Remarks",value:r==null?void 0:r.Remarks,onChange:x,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:border-indigo-100",required:!0})]}),e.jsx("div",{className:"md:col-span-2 flex flex-wrap justify-end gap-4",children:h?e.jsx(H,{}):e.jsx("button",{type:"submit",onClick:c,className:"px-6 py-3 bg-blue-900 text-white text-sm rounded-lg shadow-lg hover:bg-green-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-all duration-300",children:"Update"})})]})]})]})})})})}function V({index:m,data:s,setOriginalData:a}){var b,v;const h=E(),[r,o]=n.useState(!1),[x,c]=n.useState(!1),[f,N]=n.useState(!1),[p,S]=n.useState(!1),g=()=>{c(!x)},j=()=>{N(!f)},k=()=>{S(!p)},d=async()=>{try{o(!0),(await I.delete(`/role/Block/${s.RoleId}`)).status==200&&(a(i=>i.filter(y=>y.RoleId!==s.RoleId)),g(),D("Data Blocked Successfully","success"))}catch(u){C(u,h)}finally{o(!1)}},A=async u=>{try{o(!0);const i=await I.put("/role/update",u);if(i.status==200){const y=await i.data;a(B=>B.map(M=>M.RoleId===y.RoleId?y:M)),j(),D("Role Updated Successfully","success")}}catch(i){C(i,h)}finally{o(!1)}};return e.jsxs(e.Fragment,{children:[e.jsxs("tr",{children:[e.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:m+1}),e.jsx("td",{className:"px-3 py-2 text-ellipsis whitespace-nowrap cursor-pointer",children:((b=s==null?void 0:s.RoleName)==null?void 0:b.length)>25?`${s==null?void 0:s.RoleName.slice(0,25)} ...`:s==null?void 0:s.RoleName}),e.jsx("td",{className:"px-3 py-2 text-ellipsis whitespace-nowrap cursor-pointer",children:((v=s==null?void 0:s.Remarks)==null?void 0:v.length)>25?`${s==null?void 0:s.Remarks.slice(0,25)} ...`:s==null?void 0:s.Remarks}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-center",children:e.jsx("span",{className:`px-6 py-4 w-fit inline-flex justify-center text-base leading-5 font-semibold rounded-full ${s.IsActive?"bg-green-100":"bg-red-200"} text-black`,children:s.IsActive?"Active":"Blocked"})}),e.jsxs("td",{className:"px-3 py-2 whitespace-nowrap text-center",children:[s.IsActive&&e.jsx("button",{title:"Edit",onClick:j,className:"px-2 py-1 font-medium text-white bg-blue-600 rounded-md hover:bg-blue-500 focus:outline-none focus:shadow-outline-blue active:bg-blue-600 transition duration-150 ease-in-out",children:e.jsx("i",{className:"bx bx-edit text-2xl"})}),s.IsActive&&e.jsx("button",{title:"Block",onClick:g,className:"ml-2 px-2 py-1 font-medium text-white bg-red-600 rounded-md hover:bg-red-500 focus:outline-none focus:shadow-outline-red active:bg-red-600 transition duration-150 ease-in-out",children:e.jsx("i",{className:"bx bx-block text-2xl"})}),e.jsx("button",{title:"See Details",onClick:k,className:"ml-2 px-2 py-1 font-medium text-white bg-green-600 rounded-md hover:bg-green-500 focus:outline-none focus:shadow-outline-green active:bg-green-600 transition duration-150 ease-in-out",children:e.jsx("i",{className:"bx bx-info-circle text-2xl"})})]})]}),e.jsxs("tr",{children:[x&&e.jsx("td",{children:e.jsx(z,{handleModal:g,deleteHandle:d,name:s==null?void 0:s.RoleName,isBeingProcessed:r})}),f&&e.jsx("td",{children:e.jsx(Q,{handleEditModal:j,data:s,updateHandle:A,isBeingProcessed:r})}),p&&e.jsx("td",{children:e.jsx(X,{index:m,handleSeeAllModal:k,data:s})})]})]})}function W({index:m,data:s,setOriginalData:a}){var b;const h=E(),[r,o]=n.useState(!1),[x,c]=n.useState(!1),[f,N]=n.useState(!1),[p,S]=n.useState(!1),g=()=>{c(!x)},j=()=>{N(!f)},k=()=>{S(!p)},d=async()=>{try{o(!0),(await I.delete(`/role/Block/${s.RoleId}`)).status==200&&(a(u=>u.filter(i=>i.RoleId!==s.RoleId)),g(),D("Data Blocked Successfully","success"))}catch(v){C(v,h)}finally{o(!1)}},A=async v=>{try{o(!0);const u=await I.put("/role/update",v);if(u.status==200){const i=await u.data;a(y=>y.map(B=>B.RoleId===i.RoleId?i:B)),j(),D("Course Group Updated Successfully","success")}}catch(u){C(u,h)}finally{o(!1)}};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"p-6 m-4 bg-white border rounded-lg shadow-md hover:shadow-lg transition-all duration-300 ",children:[e.jsx("h3",{className:"text-2xl font-semibold text-gray-800",children:`${m+1}.   ${s.RoleName}`}),e.jsxs("p",{className:" text-gray-600 mt-2 text-ellipsis whitespace-nowrap",children:[e.jsx("b",{children:"Remarks:"}),((b=s==null?void 0:s.Remarks)==null?void 0:b.length)>25?`${s==null?void 0:s.Remarks.slice(0,25)} ...`:s==null?void 0:s.Remarks]}),e.jsx("div",{className:"mt-4",children:e.jsx("span",{className:`inline-block px-4 py-1 rounded-full text-white text-sm font-medium ${s.IsActive?"bg-green-500":"bg-red-500"}`,children:s.IsActive?"Active":"Blocked"})}),e.jsxs("div",{className:"mt-6 flex justify-start gap-2",children:[s.IsActive&&e.jsx("button",{title:"Edit",onClick:j,className:"px-2 py-1 font-medium text-white bg-blue-600 rounded-md hover:bg-blue-500 focus:outline-none focus:shadow-outline-blue active:bg-blue-600 transition duration-150 ease-in-out",children:e.jsx("i",{className:"bx bx-edit text-2xl"})}),s.IsActive&&e.jsx("button",{title:"Block",onClick:g,className:"px-2 py-1 font-medium text-white bg-red-600 rounded-md hover:bg-red-500 focus:outline-none focus:shadow-outline-red active:bg-red-600 transition duration-150 ease-in-out",children:e.jsx("i",{className:"bx bx-block text-2xl"})}),e.jsx("button",{title:"See Details",onClick:k,className:"px-2 py-1 font-medium text-white bg-green-600 rounded-md hover:bg-green-500 focus:outline-none focus:shadow-outline-green active:bg-green-600 transition duration-150 ease-in-out",children:e.jsx("i",{className:"bx bx-info-circle text-2xl"})})]})]}),x&&e.jsx(z,{handleModal:g,deleteHandle:d,name:s==null?void 0:s.RoleName,isBeingProcessed:r}),f&&e.jsx(Q,{handleEditModal:j,data:s,updateHandle:A,isBeingProcessed:r}),p&&e.jsx(X,{index:m,handleSeeAllModal:k,data:s})]})}function te(){const m=E(),[s,a]=n.useState([]),[h,r]=n.useState([]),[o,x]=n.useState(!1),[c,f]=n.useState(!1),[N,p]=n.useState(!1),[S,g]=n.useState(!1),[j,k]=n.useState(""),[d,A]=n.useState("default"),[b,v]=n.useState("default"),[u,i]=n.useState(1),[y]=n.useState(10),B=async()=>{try{x(!0);const l=await(await I.get("/role/GetList")).data;a(l),r(l.filter(w=>w.IsActive))}catch(t){C(t,m)}finally{x(!1)}},M=async()=>{try{x(!0);const l=await(await I.get("/role/GetList/true")).data;a(l),r(l.filter(w=>!w.IsActive)),p(!0)}catch(t){C(t,m)}finally{x(!1)}},T=()=>{if(!N&&!c)M();else{const t=c?s.filter(l=>l.IsActive):s.filter(l=>!l.IsActive);r(t)}f(!c),i(1)};n.useEffect(()=>{document.title="Role List",B()},[]),n.useEffect(()=>{const t=c?s.filter(l=>!l.IsActive):s.filter(l=>l.IsActive);r(t),A("default"),v("default"),k("")},[c,s]);const _=t=>{const l=t.target.value.toLowerCase();k(l);const O=(c?s.filter(R=>!R.IsActive):s.filter(R=>R.IsActive)).filter(R=>Object.values(R).some(L=>L.toString().toLowerCase().includes(l)));r(O),i(1)},P=()=>{let t=[...h];if(b=="default"&&d=="default")return 1;d&&(t=h.filter(l=>{var w;return(w=l[d])==null?void 0:w.toString().toLowerCase().includes(j.toLowerCase())})),b&&d&&t.sort((l,w)=>{var L,G;const O=(L=l[d])==null?void 0:L.toString().toLowerCase(),R=(G=w[d])==null?void 0:G.toString().toLowerCase();return O<R?b==="asc"?-1:1:O>R?b==="asc"?1:-1:0}),r(t),i(1)};n.useEffect(()=>{P()},[d,b,j]);const q=u*y,$=q-y,F=h.slice($,q),U=Math.ceil(h.length/y);return e.jsx(e.Fragment,{children:o?e.jsx(J,{}):e.jsxs("div",{className:"overflow-x-auto",children:[e.jsxs("div",{className:"flex justify-center min-[750px]:justify-end gap-8",children:[e.jsxs("button",{onClick:()=>g(!0),className:"bg-green-700 text-white p-4 rounded-xl  flex gap-2 items-center",children:[e.jsx("i",{className:"bx bx-plus-medical"}),"Insert"]}),S&&e.jsx(K,{setOriginalData:a,setInsertModalOpen:g}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",className:"rounded-xl w-4 h-4 cursor-pointer",onChange:T,onClick:P,checked:c}),e.jsx("p",{children:"Show Blocked"})]})]}),e.jsx("div",{className:"text-3xl text-center",children:"All Role List"}),e.jsxs("div",{className:"flex justify-between items-center mt-4 mb-2 gap-4 flex-wrap w-full",children:[e.jsx("input",{type:"text",className:"border p-2 rounded w-screen min-[440px]:w-auto",placeholder:"Search...",value:j,onChange:_}),e.jsxs("select",{className:"border p-2 rounded cursor-pointer",onChange:t=>A(t.target.value),value:d,children:[e.jsx("option",{value:"default",disabled:!0,children:"--Filter by Column--"}),e.jsx("option",{value:"RoleName",children:"Role Name"}),e.jsx("option",{value:"Remarks",children:"Remarks"})]}),e.jsxs("select",{className:"border p-2 rounded cursor-pointer",onChange:t=>v(t.target.value),value:b,children:[e.jsx("option",{value:"default",disabled:!0,children:"--Sort Order--"}),e.jsx("option",{value:"asc",disabled:d==="default",className:d==="default"?"text-red-400":"",children:"Ascending"}),e.jsx("option",{value:"desc",disabled:d==="default",className:d==="default"?"text-red-400":"",children:"Descending"})]})]}),e.jsxs("table",{className:"min-w-full divide-y border-spacing-x-4 hidden min-[750px]:table divide-gray-200 ",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"S.N"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role Name"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Remarks"}),e.jsx("th",{className:"px-3 py-2 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-3 py-2 text-center  text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Action"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200 overflow",children:F.length===0?e.jsx("tr",{children:e.jsx("td",{className:"text-3xl bg-red-200 py-20 text-center rounded-3xl",colSpan:5,children:"No data available"})}):F.map((t,l)=>e.jsx(V,{index:$+l,data:t,setOriginalData:a},t.RoleId))})]}),e.jsx("div",{className:"visible min-[750px]:hidden flex flex-col",children:F.length===0?e.jsx("div",{children:e.jsx("p",{className:"text-3xl my-5 bg-red-200 py-20 text-center rounded-3xl",children:"No data available"})}):F.map((t,l)=>e.jsx(W,{index:$+l,data:t,setOriginalData:a},t.RoleId))}),e.jsxs("div",{className:"flex justify-between items-center mt-4",children:[e.jsx("button",{disabled:u===1,onClick:()=>i(t=>t-1),className:"p-2 border rounded disabled:bg-blue-300 bg-blue-600 disabled:hover:bg-blue-300 text-white hover:bg-blue-800 ",children:"Previous"}),e.jsx("div",{className:"flex gap-2",children:Array.from({length:U},(t,l)=>e.jsx("button",{onClick:()=>i(l+1),className:`p-2 border rounded ${u===l+1?"bg-blue-600 text-white":"hover:bg-blue-800 hover:text-white"}`,children:l+1},l+1))}),e.jsx("button",{disabled:u===U,onClick:()=>i(t=>t+1),className:"p-2 border rounded disabled:bg-blue-300 bg-blue-600 disabled:hover:bg-blue-300 text-white hover:bg-blue-800",children:"Next"})]})]})})}export{te as default};
