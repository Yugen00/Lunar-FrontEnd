import{r as c,j as e,u as J,s as T,c as L}from"./index-DoCof1xZ.js";import{L as se}from"./Loader-Ctl_IIL6.js";import{C as _,h as q}from"./CLoader-BpJhil7r.js";import{D as K}from"./DeleteItem-D4Z-I8Rw.js";function W({handleEditModal:t,data:a,updateHandle:d,isBeingProcessed:b}){const[s,f]=c.useState({GroupName:"",GroupDescription:"",AllowMultipleFilesUpload:!1,MaxCount:0,ParentId:null,ParentName:""});function m(u){const{children:w,...v}=u;return v}c.useEffect(()=>{if(a){const u=m(a);f({...s,...u})}},[a]);const o=u=>{const{name:w,value:v}=u.target;f(w==="AllowMultipleFilesUpload"?{...s,[w]:v==="true"}:{...s,[w]:v})},h=u=>{if(u.preventDefault(),console.log(s),!(s!=null&&s.GroupName.trim())||!(s!=null&&s.GroupDescription.trim())){showToast("All Fields are required!","error");return}d(s)};return e.jsx(e.Fragment,{children:e.jsx("div",{className:"fixed inset-0 z-20 bg-black bg-opacity-75 flex justify-center items-center",children:e.jsx("div",{className:"flex mx-auto w-full justify-center mt-[64px] max-h-[100%]",children:e.jsxs("div",{className:"w-full border bg-white sm:max-w-xl m-4 p-4 sm:m-10 overflow-y-auto scrollbar-thin scrollbar-thumb-indigo-200 scrollbar-track-transparent",children:[e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{className:"close-btn text-2xl text-indigo-700 font-extrabold hover:text-red-300",onClick:t,children:"X"})}),e.jsxs("div",{className:"-mt-4",children:[e.jsx("h1",{className:"text-2xl font-bold text-center text-gray-800 mb-6",children:"Update Document Group"}),e.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 text-base",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{htmlFor:"GroupName",className:"block text-lg font-medium text-gray-800 mb-1",children:"Group Name"}),e.jsx("input",{type:"text",id:"GroupName",name:"GroupName",value:s==null?void 0:s.GroupName,onChange:o,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:border-indigo-100",required:!0})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{htmlFor:"GroupDescription",className:"block text-lg font-medium text-gray-800 mb-1",children:"Group Description"}),e.jsx("textarea",{name:"GroupDescription",id:"GroupDescription",value:(s==null?void 0:s.GroupDescription)||"",onChange:o,rows:4,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:border-indigo-100"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"AllowMultipleFilesUpload",className:"block text-lg font-medium text-gray-800 mb-1",children:"Allow Multiple Upload"}),e.jsxs("select",{id:"AllowMultipleFilesUpload",name:"AllowMultipleFilesUpload",value:s==null?void 0:s.AllowMultipleFilesUpload,onChange:o,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:border-indigo-100",required:!0,children:[e.jsx("option",{value:!1,children:"False"}),e.jsx("option",{value:!0,children:"True"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"MaxCount",className:"block text-lg font-medium text-gray-800 mb-1",children:"Max Count"}),e.jsx("input",{type:"number",id:"MaxCount",name:"MaxCount",value:s==null?void 0:s.MaxCount,onChange:o,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:border-indigo-100",required:!0})]}),(s==null?void 0:s.ParentId)&&(s==null?void 0:s.ParentName)&&e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{htmlFor:"ParentName",className:"block text-lg font-medium text-gray-800 mb-1",children:"Parent Name"}),e.jsx("input",{type:"text",id:"ParentName",name:"ParentName",value:s==null?void 0:s.ParentName,onChange:o,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:border-indigo-100",required:!0,disabled:!0})]}),e.jsx("div",{className:"md:col-span-2 flex flex-wrap justify-end gap-4",children:b?e.jsx(_,{}):e.jsx("button",{type:"submit",onClick:h,className:"px-6 py-3 bg-blue-900 text-white text-sm rounded-lg shadow-lg hover:bg-green-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-all duration-300",children:"Update"})})]})]})]})})})})}function Y({currentIndex:t,handleSeeAllModal:a,data:d}){return e.jsx(e.Fragment,{children:e.jsx("div",{className:"fixed inset-0 z-20 bg-black bg-opacity-75 flex justify-center items-center",children:e.jsx("div",{className:"relative sm:max-w-[35%] sm:min-w-[25%] max-h-[90vh] flex justify-center items-center p-4 mt-[64px]",children:e.jsxs("div",{className:`w-full bg-white border rounded-lg shadow-md p-6 m-4 text-base
                        overflow-y-auto max-h-[80vh] scrollbar-thin scrollbar-thumb-indigo-200 scrollbar-track-transparent`,children:[e.jsx("button",{className:"absolute right-[11%] top-[10%] text-2xl text-indigo-700 font-extrabold hover:text-red-300",onClick:a,children:"X"}),e.jsx("h3",{className:"text-2xl font-semibold text-gray-800",children:` ${t}  ${d.GroupName}`}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-gray-600 mt-2 break-words",children:[e.jsx("b",{children:"Description:"})," ",d==null?void 0:d.GroupDescription]}),e.jsxs("p",{className:"text-gray-600 mt-2",children:[e.jsx("b",{children:"Parent Name:"})," ",d.ParentName||"Self"]}),e.jsxs("p",{className:"text-gray-600 mt-2",children:[e.jsx("b",{children:"Max Count:"})," ",d.MaxCount]}),e.jsxs("p",{className:"text-gray-600 mt-2",children:[e.jsx("b",{children:"Allow Multiple Files Upload:"})," ",d.AllowMultipleFilesUpload?"True":"False"]})]}),e.jsx("div",{className:"mt-4 flex justify-center",children:e.jsx("span",{className:`inline-block  px-4 py-1 rounded-full text-white text-base font-medium ${d.IsActive?"bg-green-500":"bg-red-500"}`,children:d.IsActive?"Active":"Blocked"})})]})})})})}function Q({setOriginalData:t,setInsertModalOpen:a,ParentId:d=null,ParentName:b=""}){const s=J(),[f,m]=c.useState(!1),[o,h]=c.useState({GroupName:"",GroupDescription:"",AllowMultipleFilesUpload:!1,MaxCount:0,ParentId:d,ParentName:b}),u=v=>{const{name:k,value:C}=v.target;h(k==="AllowMultipleFilesUpload"?{...o,[k]:C==="true"}:{...o,[k]:C})},w=async v=>{var k,C;if(v.preventDefault(),!((k=o==null?void 0:o.GroupName)!=null&&k.trim())||!((C=o==null?void 0:o.GroupDescription)!=null&&C.trim())){T("All Fields are required!","error");return}try{m(!0);const I=await L.post("/documentGroup/insert",o);if(I.status==200){const P={...await I.data,children:[]};t(d&&b?G=>G.map(j=>j.GroupId===o.ParentId?{...j,children:[...j.children||[],P]}:j):G=>[...G,P]),a(!1),T("Document Group Inserted Successfully","success")}}catch(I){q(I,s)}finally{m(!1)}};return e.jsx(e.Fragment,{children:e.jsx("div",{className:"fixed inset-0 z-20 bg-black bg-opacity-75 flex justify-center items-center",children:e.jsx("div",{className:"flex mx-auto w-full justify-center mt-[64px] max-h-[100%]",children:e.jsxs("div",{className:"w-full border bg-white sm:max-w-xl m-4 p-4 sm:m-10 overflow-y-auto scrollbar-thin scrollbar-thumb-indigo-200 scrollbar-track-transparent",children:[e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{className:"close-btn text-2xl text-indigo-700 font-extrabold hover:text-red-300",onClick:()=>a(!1),children:"X"})}),e.jsxs("div",{className:"-mt-4",children:[e.jsx("h1",{className:"text-2xl font-bold text-center text-gray-800 mb-6",children:d?"Add Sub Document":"Insert New Document"}),e.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 text-base",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{htmlFor:"GroupName",className:"block text-lg font-medium text-gray-800 mb-1",children:"Group Name"}),e.jsx("input",{type:"text",id:"GroupName",name:"GroupName",onChange:u,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:border-indigo-100",required:!0})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{htmlFor:"GroupDescription",className:"block text-lg font-medium text-gray-800 mb-1",children:"Group Description"}),e.jsx("textarea",{name:"GroupDescription",id:"GroupDescription",onChange:u,rows:4,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:border-indigo-100"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"AllowMultipleFilesUpload",className:"block text-lg font-medium text-gray-800 mb-1",children:"Allow Multiple Upload"}),e.jsxs("select",{id:"AllowMultipleFilesUpload",name:"AllowMultipleFilesUpload",onChange:u,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:border-indigo-100",required:!0,children:[e.jsx("option",{value:"false",children:"False"}),e.jsx("option",{value:"true",children:"True"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"MaxCount",className:"block text-lg font-medium text-gray-800 mb-1",children:"Max Count"}),e.jsx("input",{type:"number",id:"MaxCount",name:"MaxCount",defaultValue:1,onChange:u,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:border-indigo-100",required:!0})]}),d&&b&&e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{htmlFor:"ParentName",className:"block text-lg font-medium text-gray-800 mb-1",children:"Parent Name"}),e.jsx("input",{type:"text",id:"ParentName",name:"ParentName",value:b,onChange:u,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:border-indigo-100",disabled:!0,required:!0})]}),e.jsxs("div",{className:"md:col-span-2 flex flex-wrap justify-end gap-4",children:[e.jsx("button",{type:"reset",className:"px-6 py-3 bg-red-700 text-white text-sm rounded-lg shadow-lg hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 transition-all duration-300",children:"Clear"}),f?e.jsx(_,{}):e.jsx("button",{type:"submit",onClick:w,className:"px-6 py-3 bg-blue-900 text-white text-sm rounded-lg shadow-lg hover:bg-green-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-all duration-300",children:"Insert"})]})]})]})]})})})})}function re({data:t,setOriginalData:a,toggleChildren:d,index:b,childIndex:s,level:f}){var F,M,D,r,n;const m=J(),[o,h]=c.useState(!1),[u,w]=c.useState(!1),[v,k]=c.useState(!1),[C,I]=c.useState(!1),[g,P]=c.useState(!1),[G,B]=c.useState(0),j=()=>{w(!u)},S=()=>{k(!v)},$=()=>{I(!C)},E=()=>{P(!g)},z=async()=>{try{if(h(!0),(await L.delete(`/documentGroup/Block/${t.GroupId}`)).status==200){const i=(x,N)=>x.filter(p=>p.GroupId===N?!1:(p.children&&p.children.length>0&&(p.children=i(p.children,N)),!0));a(x=>i(x,t.GroupId)),j(),T("Data Blocked Successfully","success")}}catch(l){q(l,m)}finally{h(!1)}},V=async l=>{try{h(!0);const i=await L.put("/documentGroup/update",l);if(i.status==200){const N={...await i.data,children:[]};a(p=>{const y=O=>O.map(A=>A.GroupId===l.GroupId?{...N,children:A.children||[]}:A.children&&A.children.length>0?{...A,children:y(A.children)}:A);return l.ParentId&&l.ParentName?p.map(O=>{if(O.GroupId===l.ParentId){const A=y(O.children||[]);return A.some(te=>te.GroupId===l.GroupId)||A.push(N),{...O,children:A}}return O}):y(p)}),S(),T("Document Group Updated Successfully","success")}}catch(i){q(i,m)}finally{h(!1)}},H=(l,i)=>{let x=`${l+1}`;return i.forEach(N=>{x+=`.${N+1}`}),x};c.useEffect(()=>{const l=H(b,s);B(l)},[]);const U=["bg-white","bg-cyan-100","bg-yellow-100","bg-green-100"],R=s?(l=>U[l%U.length])(f):"";return e.jsxs(e.Fragment,{children:[e.jsxs("tr",{className:`${R} text-base`,children:[e.jsxs("td",{className:`px-3 py-2 whitespace-nowrap  pl-[${f*50}px]`,children:[G," "]}),e.jsx("td",{className:"px-3 py-2 text-ellipsis whitespace-nowrap",children:((F=t==null?void 0:t.GroupName)==null?void 0:F.length)>10?`${t.GroupName.slice(0,10)} ...`:t.GroupName}),e.jsx("td",{className:"px-3 py-2 text-ellipsis whitespace-nowrap",children:((M=t==null?void 0:t.GroupDescription)==null?void 0:M.length)>20?`${t.GroupDescription.slice(0,20)} ...`:t.GroupDescription}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:((D=t==null?void 0:t.ParentName)==null?void 0:D.length)>15?`${t.ParentName.slice(0,15)} ...`:t.ParentName||"Self"}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-center",children:e.jsx("span",{className:`px-6 py-4 w-fit inline-flex justify-center text-base leading-5 font-semibold rounded-full ${t.IsActive?"bg-green-100":"bg-red-200"} text-black`,children:t.IsActive?"Active":"Blocked"})}),e.jsxs("td",{className:"px-3 py-2 whitespace-nowrap  text-center",children:[t.IsActive&&e.jsx("button",{title:"Edit",onClick:S,className:"px-2 py-1 font-medium text-white bg-blue-600 rounded-md hover:bg-blue-500 focus:outline-none focus:shadow-outline-blue active:bg-blue-600 transition duration-150 ease-in-out",children:e.jsx("i",{className:"bx bx-edit text-2xl"})}),t.IsActive&&((r=t==null?void 0:t.children)==null?void 0:r.length)===0&&e.jsx("button",{title:"Block",onClick:j,className:"ml-2 px-2 py-1 font-medium text-white bg-red-600 rounded-md hover:bg-red-500 focus:outline-none focus:shadow-outline-red active:bg-red-600 transition duration-150 ease-in-out",children:e.jsx("i",{className:"bx bx-block text-2xl"})}),t.IsActive&&e.jsx("button",{onClick:$,title:"Add Sub-Doc",className:"ml-2 px-2 py-1 font-medium text-white bg-yellow-600 rounded-md hover:bg-yellow-500 focus:outline-none focus:shadow-outline-yellow active:bg-yellow-600 transition duration-150 ease-in-out",children:e.jsx("i",{className:"bx bx-plus-medical text-2xl"})}),e.jsx("button",{onClick:E,title:"See Details",className:"ml-2 px-2 py-1 font-medium text-white bg-green-600 rounded-md hover:bg-green-500 focus:outline-none focus:shadow-outline-green active:bg-green-600 transition duration-150 ease-in-out",children:e.jsx("i",{className:"bx bx-info-circle text-2xl"})}),((n=t==null?void 0:t.children)==null?void 0:n.length)>0&&e.jsx("span",{className:"ml-1 px-2 py-1 font-medium",children:e.jsx("i",{title:"View Children",className:" bx bxs-down-arrow cursor-pointer text-base text-blue-800 hover:text-blue-600",onClick:d})})]})]}),e.jsxs("tr",{children:[u&&e.jsx("td",{children:e.jsx(K,{isModalOpen:u,handleModal:j,deleteHandle:z,name:t==null?void 0:t.GroupName,isBeingProcessed:o})}),v&&e.jsx("td",{children:e.jsx(W,{handleEditModal:S,data:t,updateHandle:V,isBeingProcessed:o})}),C&&e.jsx("td",{children:e.jsx(Q,{setOriginalData:a,setInsertModalOpen:I,ParentId:t==null?void 0:t.GroupId,ParentName:t==null?void 0:t.GroupName})}),g&&e.jsx("td",{children:e.jsx(Y,{currentIndex:G,handleSeeAllModal:E,data:t})})]})]})}function Z({data:t,index:a,setOriginalData:d,level:b=0,childIndex:s=[]}){var h;const[f,m]=c.useState(!1),o=()=>{m(!f)};return e.jsxs(e.Fragment,{children:[e.jsx(re,{data:t,index:a,childIndex:s,setOriginalData:d,toggleChildren:o,level:b}),f&&((h=t.children)==null?void 0:h.length)>0&&t.children.map((u,w)=>e.jsx(Z,{data:u,index:a,childIndex:[...s,w],setOriginalData:d,level:b+1},u.GroupId))]})}function ne({data:t,setOriginalData:a,toggleChildren:d,index:b,childIndex:s,level:f}){var F,M,D;const m=J(),[o,h]=c.useState(!1),[u,w]=c.useState(!1),[v,k]=c.useState(!1),[C,I]=c.useState(!1),[g,P]=c.useState(!1),[G,B]=c.useState(0),j=()=>{w(!u)},S=()=>{k(!v)},$=()=>{I(!C)},E=()=>{P(!g)},z=async()=>{try{if(h(!0),(await L.delete(`/documentGroup/Block/${t.GroupId}`)).status==200){const n=(l,i)=>l.filter(x=>x.GroupId===i?!1:(x.children&&x.children.length>0&&(x.children=n(x.children,i)),!0));a(l=>n(l,t.GroupId)),j(),T("Data Blocked Successfully","success")}}catch(r){q(r,m)}finally{h(!1)}},V=async r=>{try{h(!0);const n=await L.put("/documentGroup/update",r);if(n.status==200){const i={...await n.data,children:[]};a(x=>{const N=p=>p.map(y=>y.GroupId===r.GroupId?{...i,children:y.children||[]}:y.children&&y.children.length>0?{...y,children:N(y.children)}:y);return r.ParentId&&r.ParentName?x.map(p=>{if(p.GroupId===r.ParentId){const y=N(p.children||[]);return y.some(A=>A.GroupId===r.GroupId)||y.push(i),{...p,children:y}}return p}):N(x)}),S(),T("Document Group Updated Successfully","success")}}catch(n){q(n,m)}finally{h(!1)}},H=(r,n)=>{let l=`${r+1}`;return n.forEach(i=>{l+=`.${i+1}`}),l};c.useEffect(()=>{const r=H(b,s);B(r)},[]);const U=["bg-white","bg-cyan-100","bg-yellow-100","bg-green-100"],R=s?(r=>U[r%U.length])(f):"";return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:`p-6 m-4 ${R} border rounded-lg shadow-md hover:shadow-lg transition-all duration-300 `,style:{marginLeft:`${f*10}px`},children:[e.jsx("h3",{className:"text-2xl font-semibold text-gray-800",children:`${G}   ${t.GroupName}`}),e.jsxs("p",{className:" text-gray-600 mt-2 text-ellipsis",children:[e.jsx("b",{children:"Description:"})," ",((F=t==null?void 0:t.GroupDescription)==null?void 0:F.length)>15?`${t.GroupDescription.slice(0,15)} ...`:t.GroupDescription]}),e.jsxs("p",{className:"text-gray-600 mt-2",children:[e.jsx("b",{children:"Parent Name:"})," ",t.ParentName||"Self"]}),e.jsx("div",{className:"mt-4",children:e.jsx("span",{className:`inline-block px-4 py-1 rounded-full text-white text-sm font-medium ${t.IsActive?"bg-green-500":"bg-red-500"}`,children:t.IsActive?"Active":"Blocked"})}),e.jsxs("div",{className:"mt-6 flex justify-start gap-1",children:[t.IsActive&&e.jsx("button",{title:"Edit",onClick:S,className:"px-2 py-1 font-medium text-white bg-blue-600 rounded-md hover:bg-blue-500 focus:outline-none focus:shadow-outline-blue active:bg-blue-600 transition duration-150 ease-in-out",children:e.jsx("i",{className:"bx bx-edit text-2xl"})}),t.IsActive&&((M=t==null?void 0:t.children)==null?void 0:M.length)===0&&e.jsx("button",{title:"Block",onClick:j,className:"px-2 py-1 font-medium text-white bg-red-600 rounded-md hover:bg-red-500 focus:outline-none focus:shadow-outline-red active:bg-red-600 transition duration-150 ease-in-out",children:e.jsx("i",{className:"bx bx-block text-2xl"})}),t.IsActive&&e.jsx("button",{onClick:$,title:"Add Sub-Doc",className:"px-2 py-1 font-medium text-white bg-yellow-600 rounded-md hover:bg-yellow-500 focus:outline-none focus:shadow-outline-yellow active:bg-yellow-600 transition duration-150 ease-in-out",children:e.jsx("i",{className:"bx bx-plus-medical text-2xl"})}),e.jsx("button",{onClick:E,title:"See Details",className:"px-2 py-1 font-medium text-white bg-green-600 rounded-md hover:bg-green-500 focus:outline-none focus:shadow-outline-green active:bg-green-600 transition duration-150 ease-in-out",children:e.jsx("i",{className:"bx bx-info-circle text-2xl"})}),((D=t==null?void 0:t.children)==null?void 0:D.length)>0&&e.jsx("span",{className:"ml-1 px-2 py-1 font-medium",children:e.jsx("i",{title:"View Children",className:" bx bxs-down-arrow cursor-pointer text-base text-blue-800 hover:text-blue-600",onClick:d})})]})]}),u&&e.jsx(K,{handleModal:j,deleteHandle:z,name:t==null?void 0:t.GroupName,isBeingProcessed:o}),v&&e.jsx(W,{handleEditModal:S,data:t,updateHandle:V,isBeingProcessed:o}),C&&e.jsx(Q,{setOriginalData:a,setInsertModalOpen:I,ParentId:t==null?void 0:t.GroupId,ParentName:t==null?void 0:t.GroupName}),g&&e.jsx(Y,{currentIndex:G,handleSeeAllModal:E,data:t})]})}function ee({data:t,index:a,setOriginalData:d,level:b=0,childIndex:s=[]}){var h;const[f,m]=c.useState(!1),o=()=>{m(!f)};return e.jsxs(e.Fragment,{children:[e.jsx(ne,{data:t,index:a,childIndex:s,setOriginalData:d,toggleChildren:o,level:b}),f&&((h=t.children)==null?void 0:h.length)>0&&t.children.map((u,w)=>e.jsx(ee,{data:u,index:a,childIndex:[...s,w],setOriginalData:d,level:b+1},u.GroupId))]})}function de(){const t=J(),[a,d]=c.useState([]),[b,s]=c.useState([]),[f,m]=c.useState(!1),[o,h]=c.useState(!1),[u,w]=c.useState(!1),[v,k]=c.useState(!1),[C,I]=c.useState(""),[g,P]=c.useState("default"),[G,B]=c.useState("default"),[j,S]=c.useState(1),[$]=c.useState(10),E=async()=>{try{m(!0);const n=await(await L.get("/documentGroup/GetList")).data,l=H(n);d(l),s(a.filter(i=>i.IsActive)),m(!1)}catch(r){q(r,t)}finally{m(!1)}},z=async()=>{try{m(!0);const n=await(await L.get("/documentGroup/GetList/true")).data,l=H(n);d(l),s(a.filter(i=>!i.IsActive)),w(!0),m(!1)}catch(r){q(r,t)}finally{m(!1)}},V=()=>{if(!u&&!o)z();else{const r=o?a.filter(n=>n.IsActive):a.filter(n=>!n.IsActive);s(r)}h(!o),S(1)};c.useEffect(()=>{document.title="Document Group List",E()},[]),c.useEffect(()=>{const r=o?a.filter(n=>!n.IsActive):a.filter(n=>n.IsActive);s(r),P("default"),B("default"),I("")},[o,a]);const H=r=>{const n={};r.forEach(i=>{n[i.GroupName]={...i,children:[]}});const l=[];return r.forEach(i=>{var x;i.ParentName?(x=n[i.ParentName])==null||x.children.push(n[i.GroupName]):l.push(n[i.GroupName])}),l},U=r=>{const n=r.target.value.toLowerCase();I(n);const l=x=>{const N=Object.values(x||{}).some(p=>p==null?void 0:p.toString().toLowerCase().includes(n));if(x.children&&Array.isArray(x.children)){const p=x.children.some(y=>l(y));return N||p}return N},i=a.filter(l);s(i),S(1)},X=()=>{let r=[...a];if(G=="default"&&g=="default")return 1;g&&(r=a.filter(n=>{var l;return(l=n[g])==null?void 0:l.toString().toLowerCase().includes(C.toLowerCase())})),G&&g&&r.sort((n,l)=>{var N,p;const i=(N=n[g])==null?void 0:N.toString().toLowerCase(),x=(p=l[g])==null?void 0:p.toString().toLowerCase();return i<x?G==="asc"?-1:1:i>x?G==="asc"?1:-1:0}),s(r),S(1)};c.useEffect(()=>{X()},[g,G,C]);const R=j*$,F=R-$,M=b.slice(F,R),D=Math.ceil(b.length/$);return e.jsx(e.Fragment,{children:f?e.jsx(se,{}):e.jsxs("div",{className:"overflow-x-auto",children:[e.jsxs("div",{className:"flex justify-center min-[750px]:justify-end gap-8",children:[e.jsxs("button",{onClick:()=>k(!0),className:"bg-green-700 text-white p-4 rounded-xl  flex gap-2 items-center",children:[e.jsx("i",{className:"bx bx-plus-medical"})," New Doc"]}),v&&e.jsx(Q,{setInsertModalOpen:k,setOriginalData:d}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",className:"rounded-xl w-4 h-4 cursor-pointer",onChange:V,onClick:X,checked:o}),e.jsx("p",{children:"Show Blocked"})]})]}),e.jsxs("div",{className:"text-3xl text-center",children:[o?"Blocked":"Active"," Document Group"]}),e.jsxs("div",{className:"flex justify-between items-center mt-4 mb-2 gap-4 flex-wrap w-full",children:[e.jsx("input",{type:"text",className:"border p-2 rounded w-screen min-[440px]:w-auto",placeholder:"Search...",value:C,onChange:U}),e.jsxs("select",{className:"border p-2 rounded cursor-pointer",onChange:r=>P(r.target.value),value:g,children:[e.jsx("option",{value:"default",disabled:!0,children:"--Filter by Column--"}),e.jsx("option",{value:"GroupName",children:"Group Name"}),e.jsx("option",{value:"GroupDescription",children:"Group Description"}),e.jsx("option",{value:"ParentName",children:"Parent Name"})]}),e.jsxs("select",{className:"border p-2 rounded cursor-pointer",onChange:r=>B(r.target.value),value:G,children:[e.jsx("option",{value:"default",disabled:!0,children:"--Sort Order--"}),e.jsx("option",{value:"asc",disabled:g==="default",className:g==="default"?"text-red-400":"",children:"Ascending"}),e.jsx("option",{value:"desc",disabled:g==="default",className:g==="default"?"text-red-400":"",children:"Descending"})]})]}),e.jsxs("table",{className:"text-base w-full divide-y border-spacing-x-4 hidden min-[889px]:table min-[750px]:table-auto divide-gray-200",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"S.N"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Group Name"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Group Description"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Parent Name"}),e.jsx("th",{className:"px-3 py-2 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-3 py-2 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Action"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200 overflow",children:M.length===0?e.jsx("tr",{children:e.jsx("td",{className:" text-3xl bg-red-200 py-20 text-center rounded-3xl",colSpan:7,children:"No data available"})}):M.map((r,n)=>e.jsx(Z,{index:F+n,data:r,setOriginalData:d},r.GroupId))})]}),e.jsx("div",{className:"visible min-[889px]:hidden flex flex-col",children:M.length===0?e.jsx("div",{children:e.jsx("p",{className:"text-3xl my-5 bg-red-200 py-20 text-center rounded-3xl",children:"No data available"})}):M.map((r,n)=>e.jsx(ee,{index:F+n,data:r,setOriginalData:d},r.GroupId))}),e.jsxs("div",{className:"flex justify-between items-center mt-4",children:[e.jsx("button",{disabled:j===1,onClick:()=>S(r=>r-1),className:"p-2 border rounded disabled:bg-blue-300 bg-blue-600 disabled:hover:bg-blue-300 text-white hover:bg-blue-800 ",children:"Previous"}),e.jsx("div",{className:"flex gap-2",children:Array.from({length:D},(r,n)=>e.jsx("button",{onClick:()=>S(n+1),className:`p-2 border rounded ${j===n+1?"bg-blue-600 text-white":"hover:bg-blue-800 hover:text-white"}`,children:n+1},n+1))}),e.jsx("button",{disabled:j===D,onClick:()=>S(r=>r+1),className:"p-2 border rounded disabled:bg-blue-300 bg-blue-600 disabled:hover:bg-blue-300 text-white hover:bg-blue-800",children:"Next"})]})]})})}export{de as default};
