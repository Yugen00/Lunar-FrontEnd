import{j as e,u as D,r as n,c as S,s as E}from"./index-C2DhrhZ5.js";import{L as J}from"./Loader-DSogivmQ.js";import{C as $,h as F}from"./CLoader-wfO53bOi.js";function X({handleModal:b,deleteHandle:s,name:c,isBeingProcessed:m}){return e.jsx(e.Fragment,{children:e.jsx("div",{className:"fixed inset-0 z-20 bg-black bg-opacity-75 flex justify-center items-center",children:e.jsxs("div",{className:"bg-white p-6 md:p-10 rounded-lg shadow-lg w-11/12 max-w-md",children:[e.jsx("h2",{className:"text-xl font-bold mb-4 text-center",children:"Confirm Archieve"}),e.jsxs("p",{className:"mb-6 text-center",children:['Are you sure you want to archive the "',e.jsx("span",{className:"font-semibold",children:c}),'"?']}),e.jsxs("div",{className:"flex justify-center gap-4",children:[!m&&e.jsx("button",{onClick:b,className:"px-6 py-3 bg-green-700 text-white font-semibold rounded-lg shadow-md hover:bg-green-800 transition-all duration-300",children:"Cancel"}),!m&&e.jsx("button",{onClick:s,className:"px-6 py-3 bg-yellow-700 text-white font-semibold rounded-lg shadow-md hover:bg-yellow-800 transition-all duration-300",children:"Archive"}),m&&e.jsx($,{})]})]})})})}function Q({handleEditModal:b,data:s,updateHandle:c,isBeingProcessed:m}){var h,x;const u=D(),[t,p]=n.useState(s),[f,y]=n.useState(!1),[A,w]=n.useState([]),[k,j]=n.useState([]),i=async()=>{try{y(!0);const d=await(await S.get("/PersonCategory/GetList")).data;console.log(d),w(d)}catch(l){F(l,u)}},v=async()=>{try{const d=await(await S.get("/Branch/GetList")).data;j(d)}catch(l){F(l,u)}finally{y(!1)}};n.useEffect(()=>{i(),v()},[]);const r=l=>{p({...t,[l.target.name]:l.target.value})},N=l=>{l.preventDefault();const g=[{name:"FirstName",label:"First Name",required:!0},{name:"LastName",label:"Last Name",required:!0},{name:"Sex",label:"Sex",required:!0},{name:"DobBs",label:"Date of Birth (AD)",required:!0},{name:"ContactAddress",label:"Address",required:!0},{name:"EmailAddress",label:"Email",required:!0},{name:"ContactPhone",label:"Phone",required:!0},{name:"CatId",label:"Category",required:!0},{name:"BranchId",label:"Branch",required:!0},{name:"StartDateBs",label:"Start Date (BS)",required:!0}].find(C=>{const B=t[C.name];return C.required&&(!B||B.toString().trim()==="")});if(g){E(`"${g.label}" is required!`,"error");return}console.log(t),c(t)};return e.jsx(e.Fragment,{children:e.jsx("div",{className:"fixed inset-0 z-20 bg-black bg-opacity-75 flex justify-center items-center",children:e.jsx("div",{className:"flex mx-auto w-full justify-center mt-[64px] max-h-[100%]",children:e.jsxs("div",{className:"w-full border bg-white sm:max-w-xl m-4 p-4 sm:m-10 overflow-y-auto scrollbar-thin scrollbar-thumb-indigo-200 scrollbar-track-transparent",children:[e.jsx("div",{className:"flex justify-end ",children:e.jsx("button",{className:"close-btn text-2xl text-indigo-700 font-extrabold hover:text-red-300",onClick:b,children:"X"})}),e.jsxs("div",{className:"-mt-4",children:[e.jsx("h1",{className:"text-2xl font-bold text-center text-gray-800 mb-6",children:"Update Person Category"}),e.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"FirstName",className:"block text-lg font-medium text-gray-800 mb-1",children:["First Name ",e.jsx("span",{className:"text-red-600 text-lg",children:"*"})]}),e.jsx("input",{type:"text",id:"FirstName",name:"FirstName",value:t==null?void 0:t.FirstName,onChange:r,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:border-indigo-100",required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"LastName",className:"block text-lg font-medium text-gray-800 mb-1",children:["Last Name ",e.jsx("span",{className:"text-red-600 text-lg",children:"*"})]}),e.jsx("input",{type:"text",id:"LastName",value:t==null?void 0:t.LastName,name:"LastName",onChange:r,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:border-indigo-100",required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"Sex",className:"block text-lg font-medium text-gray-800 mb-1",children:["Sex ",e.jsx("span",{className:"text-red-600 text-lg",children:"*"})]}),e.jsxs("select",{name:"Sex",id:"Sex",value:t==null?void 0:t.Sex,onChange:r,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:border-indigo-100",required:!0,children:[e.jsx("option",{value:"",disabled:!0,selected:!0,children:"--Select Sex--"}),e.jsx("option",{value:"Male",children:"Male"}),e.jsx("option",{value:"Female",children:"Female"}),e.jsx("option",{value:"Others",children:"Others"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"DobBs",className:"block text-lg font-medium text-gray-800 mb-1",children:["Date of Birth (AD) ",e.jsx("span",{className:"text-red-600 text-lg",children:"*"})]}),e.jsx("input",{type:"date",id:"DobBs",name:"DobBs",value:t==null?void 0:t.DobBs,onChange:r,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:border-indigo-100",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"FatherName",className:"block text-lg font-medium text-gray-800 mb-1",children:"Father Name"}),e.jsx("input",{type:"text",id:"FatherName",name:"FatherName",value:t==null?void 0:t.FatherName,onChange:r,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:border-indigo-100"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"MotherName",className:"block text-lg font-medium text-gray-800 mb-1",children:"Mother Name"}),e.jsx("input",{type:"text",id:"MotherName",name:"MotherName",value:t==null?void 0:t.MotherName,onChange:r,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:border-indigo-100"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"GrandFatherName",className:"block text-lg font-medium text-gray-800 mb-1",children:"Grand Father Name"}),e.jsx("input",{type:"text",id:"GrandFatherName",name:"GrandFatherName",value:t==null?void 0:t.GrandFatherName,onChange:r,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:border-indigo-100"})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"ContactAddress",className:"block text-lg font-medium text-gray-800 mb-1",children:["Address ",e.jsx("span",{className:"text-red-600 text-lg",children:"*"})]}),e.jsx("input",{type:"text",id:"ContactAddress",name:"ContactAddress",value:t==null?void 0:t.ContactAddress,onChange:r,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:border-indigo-100",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"CitizenshipNo",className:"block text-lg font-medium text-gray-800 mb-1",children:"CitizenshipNo"}),e.jsx("input",{type:"text",id:"CitizenshipNo",name:"CitizenshipNo",value:t==null?void 0:t.CitizenshipNo,onChange:r,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:border-indigo-100"})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"EmailAddress",className:"block text-lg font-medium text-gray-800 mb-1",children:["Email ",e.jsx("span",{className:"text-red-600 text-lg",children:"*"})]}),e.jsx("input",{type:"email",id:"EmailAddress",name:"EmailAddress",value:t==null?void 0:t.EmailAddress,onChange:r,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:border-indigo-100",required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"ContactPhone",className:"block text-lg font-medium text-gray-800 mb-1",children:["Phone ",e.jsx("span",{className:"text-red-600 text-lg",children:"*"})]}),e.jsx("input",{type:"text",id:"ContactPhone",name:"ContactPhone",value:t==null?void 0:t.ContactPhone,onChange:r,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:border-indigo-100",required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"CatId",className:"block text-lg font-medium text-gray-800 mb-1",children:["Category ",e.jsx("span",{className:"text-red-600 text-lg",children:"*"})]}),e.jsxs("select",{name:"CatId",id:"CatId",className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:border-indigo-100",value:(h=t==null?void 0:t.CatId)==null?void 0:h.toString(),onChange:r,required:!0,children:[e.jsx("option",{value:"",disabled:!0,children:"--Select Category--"}),A.map(l=>e.jsx("option",{value:l.CatId,children:l.CatName},l.CatId))]})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"BranchId",className:"block text-lg font-medium text-gray-800 mb-1",children:["Branch ",e.jsx("span",{className:"text-red-600 text-lg",children:"*"})]}),e.jsxs("select",{name:"BranchId",id:"BranchId",value:(x=t==null?void 0:t.BranchId)==null?void 0:x.toString(),className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:border-indigo-100",onChange:r,required:!0,children:[e.jsx("option",{value:"",disabled:!0,children:"--Select Branch--"}),k.map(l=>e.jsx("option",{value:l==null?void 0:l.BranchId,children:l==null?void 0:l.BranchAddress},l==null?void 0:l.BranchId))]})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"StartDateBs",className:"block text-lg font-medium text-gray-800 mb-1",children:["Start Date (BS) ",e.jsx("span",{className:"text-red-600 text-lg",children:"*"})]}),e.jsx("input",{type:"date",id:"StartDateBs",name:"StartDateBs",value:t==null?void 0:t.StartDateBs,onChange:r,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:border-indigo-100",required:!0})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{htmlFor:"Remarks",className:"block text-lg font-medium text-gray-800 mb-1",children:"Remarks"}),e.jsx("input",{type:"text",id:"Remarks",name:"Remarks",value:t==null?void 0:t.Remarks,onChange:r,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:border-indigo-100"})]}),e.jsx("div",{className:"md:col-span-2 flex flex-wrap justify-end gap-4",children:m?e.jsx($,{}):e.jsx("button",{type:"submit",onClick:N,className:"px-6 py-3 bg-blue-900 text-white text-sm rounded-lg shadow-lg hover:bg-green-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-all duration-300",children:"Update"})})]})]})]})})})})}function T({handleSeeAllModal:b,data:s,index:c}){return e.jsx(e.Fragment,{children:e.jsx("div",{className:"fixed inset-0 z-20 bg-black bg-opacity-75 flex justify-center items-center",children:e.jsx("div",{className:"relative sm:max-w-[50%] sm:min-w-[35%] max-h-[90vh] flex justify-center items-center p-4 mt-[64px]",children:e.jsxs("div",{className:`w-full bg-white border rounded-lg shadow-md p-6 m-4 
                        overflow-y-auto max-h-[80vh] scrollbar-thin scrollbar-thumb-indigo-200 scrollbar-track-transparent`,children:[e.jsx("button",{className:"absolute right-[10%] top-[7%] text-2xl text-indigo-700 font-extrabold hover:text-red-300",onClick:b,children:"X"}),e.jsx("h3",{className:"text-2xl font-semibold text-gray-800",children:`${c+1}.   ${s.FullName}`}),e.jsxs("div",{children:[e.jsxs("div",{className:"border-gray-400 border-b-2 my-1 pb-2",children:[e.jsxs("p",{className:"text-gray-600 mt-2",children:[e.jsx("b",{children:"Sex:"})," ",(s==null?void 0:s.Sex)||"None"]}),e.jsxs("p",{className:"text-gray-600 mt-2",children:[e.jsx("b",{children:"Dob (Ad):"})," ",(s==null?void 0:s.DobAd)||"None"]}),e.jsxs("p",{className:"text-gray-600 mt-2",children:[e.jsx("b",{children:"Email:"})," ",(s==null?void 0:s.EmailAddress)||"None"]}),e.jsxs("p",{className:"text-gray-600 mt-2",children:[e.jsx("b",{children:"CitizenshipNo:"})," ",(s==null?void 0:s.CitizenshipNo)||"None"]}),e.jsxs("p",{className:"text-gray-600 mt-2",children:[e.jsx("b",{children:"Phone:"})," ",(s==null?void 0:s.ContactPhone)||"None"]}),e.jsxs("p",{className:"text-gray-600 mt-2",children:[e.jsx("b",{children:"Address:"})," ",(s==null?void 0:s.ContactAddress)||"None"]})]}),e.jsxs("div",{className:"border-gray-400 border-b-2 my-1 pb-2",children:[e.jsx("p",{className:"text-gray-800 mt-2 text-lg font-bold",children:"Family Details"}),e.jsxs("p",{className:"text-gray-600 mt-2",children:[e.jsx("b",{children:"Father Name:"})," ",(s==null?void 0:s.FatherName)||"None"]}),e.jsxs("p",{className:"text-gray-600 mt-2",children:[e.jsx("b",{children:"Mother Name:"})," ",(s==null?void 0:s.MotherName)||"None"]}),e.jsxs("p",{className:"text-gray-600 mt-2",children:[e.jsx("b",{children:"GrandFather Name:"})," ",(s==null?void 0:s.GrandFatherName)||"None"]})]}),e.jsxs("div",{className:"border-gray-400 border-b-2 my-1 pb-2",children:[e.jsx("p",{className:"text-gray-800 mt-2 text-lg font-bold",children:"Office Details"}),e.jsxs("p",{className:"text-gray-600 mt-2",children:[e.jsx("b",{children:"OfficeName:"})," ",(s==null?void 0:s.OfficeName)||"None"]}),e.jsxs("p",{className:"text-gray-600 mt-2",children:[e.jsx("b",{children:"BranchAddress:"})," ",(s==null?void 0:s.BranchAddress)||"None"]}),e.jsxs("p",{className:"text-gray-600 mt-2",children:[e.jsx("b",{children:"Branch Phone:"})," ",(s==null?void 0:s.BranchPhonePrimary)||"None"]})]}),e.jsxs("div",{className:"border-gray-400 border-b-2 my-1 pb-2",children:[e.jsx("p",{className:"text-gray-800 mt-2 text-lg font-bold",children:"Others"}),e.jsxs("p",{className:"text-gray-600 mt-2",children:[e.jsx("b",{children:"Person Category:"})," ",(s==null?void 0:s.PersonalCategory)||"None"]}),e.jsxs("p",{className:"text-gray-600 mt-2",children:[e.jsx("b",{children:"Office Date (Bs):"})," ",(s==null?void 0:s.StartDateBs)||"None"," ",e.jsx("b",{children:"to"})," ",(s==null?void 0:s.EndDateBs)||"Present"]}),e.jsxs("p",{className:"text-gray-600 mt-2",children:[e.jsx("b",{children:"ContactAddress:"})," ",(s==null?void 0:s.ContactAddress)||"None"]})]})]}),e.jsx("div",{className:"mt-4",children:e.jsx("span",{className:`inline-block px-4 py-4 md:py-1 rounded-full text-white text-sm font-medium ${s.LoginStatus?"bg-green-500":"bg-red-500"}`,children:s.LoginStatus?"Active":"Inactive"})})]})})})})}function K({index:b,data:s,setOriginalData:c}){var h,x,l;const m=D(),[u,t]=n.useState(!1),[p,f]=n.useState(!1),[y,A]=n.useState(!1),[w,k]=n.useState(!1),j=()=>{f(!p)},i=()=>{A(!y)},v=()=>{k(!w)},r=async()=>{try{t(!0),(await S.delete(`/person/Archive/${s.PersonId}`)).status==200&&(c(g=>g.filter(C=>C.PersonId!==s.PersonId)),j(),E("Data Archived Successfully","success"))}catch(d){F(d,m)}finally{t(!1)}},N=async d=>{try{t(!0);const g=await S.put("/person/update",d);if(g.status==200){const C=await g.data;c(B=>B.map(M=>M.PersonId===C.PersonId?C:M)),i(),E("Person Updated Successfully","success")}}catch(g){F(g,m)}finally{t(!1)}};return e.jsxs(e.Fragment,{children:[e.jsxs("tr",{children:[e.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:b+1}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:((h=s==null?void 0:s.FullName)==null?void 0:h.length)>10?`${s==null?void 0:s.FullName.slice(0,10)} ...`:s==null?void 0:s.FullName}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:s==null?void 0:s.Sex}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:((x=s==null?void 0:s.EmailAddress)==null?void 0:x.length)>10?`${s==null?void 0:s.EmailAddress.slice(0,10)} ...`:(s==null?void 0:s.EmailAddress)||"None"}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:((l=s==null?void 0:s.FatherName)==null?void 0:l.length)>10?`${s==null?void 0:s.FatherName.slice(0,10)} ...`:(s==null?void 0:s.FatherName)||"None"}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap ",children:e.jsx("span",{className:`p-4 w-full inline-flex justify-center text-base leading-5 font-semibold rounded-full ${s.LoginStatus?"bg-green-100":"bg-red-200"} text-black`,children:s.LoginStatus?"Active":"Inactive"})}),e.jsxs("td",{className:"px-3 py-2 whitespace-nowrap",children:[e.jsx("button",{onClick:i,title:"Edit",className:"px-2 py-1 font-medium text-white bg-blue-600 rounded-md hover:bg-blue-500 focus:outline-none focus:shadow-outline-blue active:bg-blue-600 transition duration-150 ease-in-out",children:e.jsx("i",{className:"bx bx-edit text-2xl"})}),!(s!=null&&s.EndDateAd)&&e.jsx("button",{title:"Archive",onClick:j,className:"ml-2 px-2 py-1 font-medium text-white bg-yellow-600 rounded-md hover:bg-yellow-500 focus:outline-none focus:shadow-outline-yellow active:bg-yellow-600 transition duration-150 ease-in-out",children:e.jsx("i",{className:"bx bx-archive-in text-2xl"})}),e.jsx("button",{title:"See Details",onClick:v,className:"ml-2 px-2 py-1 font-medium text-white bg-green-600 rounded-md hover:bg-green-500 focus:outline-none focus:shadow-outline-green active:bg-green-600 transition duration-150 ease-in-out",children:e.jsx("i",{className:"bx bx-info-circle text-2xl"})})]})]}),e.jsxs("tr",{children:[p&&e.jsx("td",{children:e.jsx(X,{isModalOpen:p,handleModal:j,deleteHandle:r,name:s==null?void 0:s.FullName,isBeingProcessed:u})}),y&&e.jsx("td",{children:e.jsx(Q,{handleEditModal:i,data:s,updateHandle:N,isBeingProcessed:u})}),w&&e.jsx("td",{children:e.jsx(T,{index:b,handleSeeAllModal:v,data:s})})]})]})}function V({index:b,data:s,setOriginalData:c}){var h,x;const m=D(),[u,t]=n.useState(!1),[p,f]=n.useState(!1),[y,A]=n.useState(!1),[w,k]=n.useState(!1),j=()=>{f(!p)},i=()=>{A(!y)},v=()=>{k(!w)},r=async()=>{try{t(!0),(await S.delete(`/person/Archive/${s.PersonId}`)).status==200&&(c(d=>d.filter(g=>g.PersonId!==s.PersonId)),j(),E("Data Archived Successfully","success"))}catch(l){F(l,m)}finally{t(!1)}},N=async l=>{try{t(!0);const d=await S.put("/person/update",l);if(d.status==200){const g=await d.data;c(C=>C.map(B=>B.PersonId===g.PersonId?g:B)),i(),E("Person Updated Successfully","success")}}catch(d){F(d,m)}finally{t(!1)}};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"p-6 m-4 bg-white border rounded-lg shadow-md hover:shadow-lg transition-all duration-300 ",children:[e.jsx("h3",{className:"text-2xl font-semibold text-gray-800",children:`${b+1}.   ${s.FullName}`}),e.jsxs("div",{children:[e.jsxs("p",{className:" text-gray-600 mt-2 text-ellipsis whitespace-nowrap",children:[e.jsx("b",{children:"Father Name:"})," ",((h=s==null?void 0:s.FatherName)==null?void 0:h.length)>10?`${s==null?void 0:s.FatherName.slice(0,10)} ...`:(s==null?void 0:s.FatherName)||"None"]}),e.jsxs("p",{className:" text-gray-600 mt-2 text-ellipsis whitespace-nowrap",children:[e.jsx("b",{children:"Email:"})," ",((x=s==null?void 0:s.EmailAddress)==null?void 0:x.length)>10?`${s==null?void 0:s.EmailAddress.slice(0,10)} ...`:(s==null?void 0:s.EmailAddress)||"None"]})]}),e.jsx("div",{className:"mt-4",children:e.jsx("span",{className:`inline-block px-4 py-4 md:py-1 rounded-full text-white text-sm font-medium ${s.LoginStatus?"bg-green-500":"bg-red-500"}`,children:s.LoginStatus?"Active":"Inactive"})}),e.jsxs("div",{className:"mt-6 flex justify-start gap-1",children:[e.jsx("button",{title:"Edit",onClick:i,className:"px-2 py-1 font-medium text-white bg-blue-600 rounded-md hover:bg-blue-500 focus:outline-none focus:shadow-outline-blue active:bg-blue-600 transition duration-150 ease-in-out",children:e.jsx("i",{className:"bx bx-edit text-2xl"})}),!(s!=null&&s.EndDateAd)&&e.jsx("button",{title:"Archieve",onClick:j,className:"px-2 py-1 font-medium text-white bg-yellow-600 rounded-md hover:bg-yellow-500 focus:outline-none focus:shadow-outline-yellow active:bg-yellow-600 transition duration-150 ease-in-out",children:e.jsx("i",{className:"bx bx-archive-in text-2xl"})}),e.jsx("button",{title:"See Details",onClick:v,className:"px-2 py-1 font-medium text-white bg-green-600 rounded-md hover:bg-green-500 focus:outline-none focus:shadow-outline-green active:bg-green-600 transition duration-150 ease-in-out",children:e.jsx("i",{className:"bx bx-info-circle text-2xl"})})]})]}),p&&e.jsx(X,{handleModal:j,deleteHandle:r,name:s==null?void 0:s.FullName,isBeingProcessed:u}),y&&e.jsx(Q,{handleEditModal:i,data:s,updateHandle:N,isBeingProcessed:u}),w&&e.jsx(T,{index:b,handleSeeAllModal:v,data:s})]})}function W({setOriginalData:b,setInsertModalOpen:s}){const c=D(),[m,u]=n.useState(!1),[t,p]=n.useState([]),[f,y]=n.useState([]),[A,w]=n.useState([]),k=async()=>{try{const N=await(await S.get("/PersonCategory/GetList")).data;y(N)}catch(r){F(r,c)}},j=async()=>{try{const N=await(await S.get("/Branch/GetList")).data;w(N)}catch(r){F(r,c)}};n.useEffect(()=>{k(),j()},[]);const i=r=>{p({...t,[r.target.name]:r.target.value})},v=async r=>{r.preventDefault();const h=[{name:"FirstName",label:"First Name",required:!0},{name:"LastName",label:"Last Name",required:!0},{name:"Sex",label:"Sex",required:!0},{name:"DobBs",label:"Date of Birth (AD)",required:!0},{name:"ContactAddress",label:"Address",required:!0},{name:"EmailAddress",label:"Email",required:!0},{name:"ContactPhone",label:"Phone",required:!0},{name:"CatId",label:"Category",required:!0},{name:"BranchId",label:"Branch",required:!0},{name:"StartDateBs",label:"Start Date (BS)",required:!0}].find(x=>{var l;return x.required&&!((l=t[x.name])!=null&&l.trim())});if(h){E(`"${h.label}" is required!`,"error");return}try{u(!0);const x=await S.post("/person/insert",t);if(x.status==200){const l=await x.data;b(d=>[...d,l]),s(!1),E("Person Inserted Successfully","success")}}catch(x){F(x,c)}finally{u(!1)}};return e.jsx(e.Fragment,{children:e.jsx("div",{className:"fixed inset-0 z-20 bg-black bg-opacity-75 flex justify-center items-center",children:e.jsx("div",{className:"flex mx-auto w-full justify-center mt-[64px] max-h-[100%]",children:e.jsxs("div",{className:"w-full border bg-white sm:max-w-xl m-4 p-4 sm:m-10 overflow-y-auto scrollbar-thin scrollbar-thumb-indigo-200 scrollbar-track-transparent",children:[e.jsx("div",{className:"flex justify-end ",children:e.jsx("button",{className:"close-btn text-2xl text-indigo-700 font-extrabold hover:text-red-300",onClick:()=>s(!1),children:"X"})}),e.jsxs("div",{className:"-mt-4",children:[e.jsx("h1",{className:"text-2xl font-bold text-center text-gray-800 mb-6",children:"Insert Person"}),e.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"FirstName",className:"block text-lg font-medium text-gray-800 mb-1",children:["First Name ",e.jsx("span",{className:"text-red-600 text-lg",children:"*"})]}),e.jsx("input",{type:"text",id:"FirstName",name:"FirstName",onChange:i,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:border-indigo-100"})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"LastName",className:"block text-lg font-medium text-gray-800 mb-1",children:["Last Name ",e.jsx("span",{className:"text-red-600 text-lg",children:"*"})]}),e.jsx("input",{type:"text",id:"LastName",name:"LastName",onChange:i,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:border-indigo-100"})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"Sex",className:"block text-lg font-medium text-gray-800 mb-1",children:["Sex ",e.jsx("span",{className:"text-red-600 text-lg",children:"*"})]}),e.jsxs("select",{name:"Sex",id:"Sex",onChange:i,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:border-indigo-100",children:[e.jsx("option",{value:"",disabled:!0,selected:!0,children:"--Select Sex--"}),e.jsx("option",{value:"Male",children:"Male"}),e.jsx("option",{value:"Female",children:"Female"}),e.jsx("option",{value:"Others",children:"Others"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"DobBs",className:"block text-lg font-medium text-gray-800 mb-1",children:["Date of Birth (AD) ",e.jsx("span",{className:"text-red-600 text-lg",children:"*"})]}),e.jsx("input",{type:"date",id:"DobBs",name:"DobBs",onChange:i,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:border-indigo-100"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"FatherName",className:"block text-lg font-medium text-gray-800 mb-1",children:"Father Name"}),e.jsx("input",{type:"text",id:"FatherName",name:"FatherName",onChange:i,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:border-indigo-100"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"MotherName",className:"block text-lg font-medium text-gray-800 mb-1",children:"Mother Name"}),e.jsx("input",{type:"text",id:"MotherName",name:"MotherName",onChange:i,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:border-indigo-100"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"GrandFatherName",className:"block text-lg font-medium text-gray-800 mb-1",children:"Grand Father Name"}),e.jsx("input",{type:"text",id:"GrandFatherName",name:"GrandFatherName",onChange:i,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:border-indigo-100"})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"ContactAddress",className:"block text-lg font-medium text-gray-800 mb-1",children:["Address ",e.jsx("span",{className:"text-red-600 text-lg",children:"*"})]}),e.jsx("input",{type:"text",id:"ContactAddress",name:"ContactAddress",onChange:i,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:border-indigo-100"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"CitizenshipNo",className:"block text-lg font-medium text-gray-800 mb-1",children:"CitizenshipNo"}),e.jsx("input",{type:"text",id:"CitizenshipNo",name:"CitizenshipNo",onChange:i,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:border-indigo-100"})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"EmailAddress",className:"block text-lg font-medium text-gray-800 mb-1",children:["Email ",e.jsx("span",{className:"text-red-600 text-lg",children:"*"})]}),e.jsx("input",{type:"email",id:"EmailAddress",name:"EmailAddress",onChange:i,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:border-indigo-100"})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"ContactPhone",className:"block text-lg font-medium text-gray-800 mb-1",children:["Phone ",e.jsx("span",{className:"text-red-600 text-lg",children:"*"})]}),e.jsx("input",{type:"text",id:"ContactPhone",name:"ContactPhone",onChange:i,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:border-indigo-100"})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"CatId",className:"block text-lg font-medium text-gray-800 mb-1",children:["Category ",e.jsx("span",{className:"text-red-600 text-lg",children:"*"})]}),e.jsxs("select",{name:"CatId",id:"CatId",className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:border-indigo-100",onChange:i,children:[e.jsx("option",{value:"",disabled:!0,selected:!0,children:"--Select Category--"}),f.map(r=>e.jsx("option",{value:r.CatId,children:r.CatName},r.CatId))]})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"BranchId",className:"block text-lg font-medium text-gray-800 mb-1",children:["Branch ",e.jsx("span",{className:"text-red-600 text-lg",children:"*"})]}),e.jsxs("select",{name:"BranchId",id:"BranchId",className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:border-indigo-100",onChange:i,children:[e.jsx("option",{value:"",disabled:!0,selected:!0,children:"--Select Branch--"}),A.map(r=>e.jsx("option",{value:r==null?void 0:r.BranchId,children:r==null?void 0:r.BranchAddress},r==null?void 0:r.BranchId))]})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"StartDateBs",className:"block text-lg font-medium text-gray-800 mb-1",children:["Start Date (BS) ",e.jsx("span",{className:"text-red-600 text-lg",children:"*"})]}),e.jsx("input",{type:"date",id:"StartDateBs",name:"StartDateBs",onChange:i,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:border-indigo-100"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{htmlFor:"Remarks",className:"block text-lg font-medium text-gray-800 mb-1",children:"Remarks"}),e.jsx("input",{type:"text",id:"Remarks",name:"Remarks",onChange:i,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:border-indigo-100"})]}),e.jsxs("div",{className:"md:col-span-2 flex flex-wrap justify-end gap-4",children:[e.jsx("button",{type:"reset",className:"px-6 py-3 bg-red-700 text-white text-sm rounded-lg shadow-lg hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 transition-all duration-300",onClick:()=>p({}),children:"Clear"}),m?e.jsx($,{}):e.jsx("button",{type:"submir",onClick:v,className:"px-6 py-3 bg-blue-900 text-white text-sm rounded-lg shadow-lg hover:bg-green-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-all duration-300",children:"Insert"})]})]})]})]})})})})}function se(){const b=D(),[s,c]=n.useState([]),[m,u]=n.useState([]),[t,p]=n.useState(!1),[f,y]=n.useState(!1),[A,w]=n.useState(!1),[k,j]=n.useState(!1),[i,v]=n.useState(""),[r,N]=n.useState("default"),[h,x]=n.useState("default"),[l,d]=n.useState(1),[g]=n.useState(10),C=async()=>{try{p(!0);const a=await(await S.get("/person/GetList")).data;c(a),u(a.filter(P=>!P.EndDateBs))}catch(o){F(o,b)}finally{p(!1)}},B=async()=>{try{p(!0);const a=await(await S.get("/person/GetList/true")).data;c(a),u(a.filter(P=>P.EndDateBs)),w(!0)}catch(o){F(o,b)}finally{p(!1)}},M=()=>{if(!A&&!f)B();else{const o=f?s.filter(a=>a.IsActive):s.filter(a=>!a.IsActive);u(o)}y(!f),d(1)};n.useEffect(()=>{document.title="Person List",C()},[]),n.useEffect(()=>{const o=f?s.filter(a=>a.EndDateBs):s.filter(a=>!a.EndDateBs);u(o),N("default"),x("default"),v("")},[f,s]);const _=o=>{const a=o.target.value.toLowerCase();v(a);const O=(f?s.filter(I=>I.EndDateBs):s.filter(I=>!I.EndDateBs)).filter(I=>Object.values(I).some(L=>L==null?void 0:L.toString().toLowerCase().includes(a)));u(O),d(1)},z=()=>{let o=[...m];if(h=="default"&&r=="default")return 1;r&&(o=m.filter(a=>{var P;return(P=a[r])==null?void 0:P.toString().toLowerCase().includes(i.toLowerCase())})),h&&r&&o.sort((a,P)=>{var L,U;const O=(L=a[r])==null?void 0:L.toString().toLowerCase(),I=(U=P[r])==null?void 0:U.toString().toLowerCase();return O<I?h==="asc"?-1:1:O>I?h==="asc"?1:-1:0}),u(o),d(1)};n.useEffect(()=>{z()},[r,h,i]);const R=l*g,G=R-g,q=m.slice(G,R),H=Math.ceil(m.length/g);return e.jsx(e.Fragment,{children:t?e.jsx(J,{}):e.jsxs("div",{className:"overflow-x-auto",children:[e.jsxs("div",{className:"flex justify-center min-[750px]:justify-end gap-8",children:[e.jsxs("button",{onClick:()=>j(!0),className:"bg-green-700 text-white p-2 gap-1 sm:p-4 rounded-xl  flex sm:gap-2 items-center",children:[e.jsx("i",{className:"bx bx-plus-medical"}),"Insert"]}),k&&e.jsx(W,{setOriginalData:c,setInsertModalOpen:j}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",className:"rounded-xl w-4 h-4 cursor-pointer",onChange:M,onClick:z,checked:f}),e.jsx("p",{className:"text-[13px] sm:text-base",children:"Show Archived"})]})]}),e.jsxs("div",{className:"text-3xl text-center",children:[f?"Archived ":"All ","Person List "]}),e.jsxs("div",{className:"flex justify-between items-center mt-4 mb-2 gap-4 flex-wrap w-full",children:[e.jsx("input",{type:"text",className:"border p-2 rounded w-screen min-[440px]:w-auto",placeholder:"Search...",value:i,onChange:_}),e.jsxs("select",{className:"border p-2 rounded cursor-pointer",onChange:o=>N(o.target.value),value:r,children:[e.jsx("option",{value:"default",disabled:!0,children:"--Filter by Column--"}),e.jsx("option",{value:"FullName",children:"Full Name"}),e.jsx("option",{value:"Sex",children:"Sex"}),e.jsx("option",{value:"FatherName",children:"Father Name"}),e.jsx("option",{value:"LoginStatus",children:"Login Status"})]}),e.jsxs("select",{className:"border p-2 rounded cursor-pointer",onChange:o=>x(o.target.value),value:h,children:[e.jsx("option",{value:"default",disabled:!0,children:"--Sort Order--"}),e.jsx("option",{value:"asc",disabled:r==="default",className:r==="default"?"text-red-400":"",children:"Ascending"}),e.jsx("option",{value:"desc",disabled:r==="default",className:r==="default"?"text-red-400":"",children:"Descending"})]})]}),e.jsxs("table",{className:"min-w-full divide-y border-spacing-x-4 hidden min-[750px]:table min-[750px]:table-fixed  divide-gray-200 ",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"S.N"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Full Name"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Sex"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Father Name"}),e.jsx("th",{className:"px-3 py-2 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Login Status"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Action"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200 overflow",children:q.length===0?e.jsx("tr",{children:e.jsx("td",{className:" text-3xl bg-red-200 py-20 text-center rounded-3xl",colSpan:7,children:"No data available"})}):q.map((o,a)=>e.jsx(K,{index:G+a,data:o,setOriginalData:c},o.PersonId))})]}),e.jsx("div",{className:"visible min-[750px]:hidden flex flex-col",children:q.length===0?e.jsx("div",{children:e.jsx("p",{className:"text-3xl my-5 bg-red-200 py-20 text-center rounded-3xl",children:"No data available"})}):q.map((o,a)=>e.jsx(V,{index:G+a,data:o,setOriginalData:c},o.PersonId))}),e.jsxs("div",{className:"flex justify-between items-center mt-4",children:[e.jsx("button",{disabled:l===1,onClick:()=>d(o=>o-1),className:"p-2 border rounded disabled:bg-blue-300 bg-blue-600 disabled:hover:bg-blue-300 text-white hover:bg-blue-800 ",children:"Previous"}),e.jsx("div",{className:"flex gap-2",children:Array.from({length:H},(o,a)=>e.jsx("button",{onClick:()=>d(a+1),className:`p-2 border rounded ${l===a+1?"bg-blue-600 text-white":"hover:bg-blue-800 hover:text-white"}`,children:a+1},a+1))}),e.jsx("button",{disabled:l===H,onClick:()=>d(o=>o+1),className:"p-2 border rounded disabled:bg-blue-300 bg-blue-600 disabled:hover:bg-blue-300 text-white hover:bg-blue-800",children:"Next"})]})]})})}export{se as default};
