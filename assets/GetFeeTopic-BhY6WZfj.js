import{r as n,j as e,u as L,c as I,s as F}from"./index-CGDZhjTc.js";import{L as J}from"./Loader-C-B24oKQ.js";import{C as R,h as C}from"./CLoader-QA6eDVUp.js";import{D as q}from"./DeleteItem-Bf0dFftp.js";function H({handleEditModal:u,data:t,updateHandle:c,isBeingProcessed:m}){const[i,r]=n.useState(t),p=f=>{r({...i,[f.target.name]:f.target.value})},d=f=>{f.preventDefault(),c(i)};return e.jsx(e.Fragment,{children:e.jsx("div",{className:"fixed inset-0 z-20 bg-black bg-opacity-75 flex justify-center items-center",children:e.jsx("div",{className:"flex mx-auto w-full justify-center",children:e.jsxs("div",{className:"w-full bg-white border sm:max-w-xl border-indigo-400 m-4 p-4 sm:m-10",children:[e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{className:"close-btn text-2xl text-indigo-700 font-extrabold hover:text-red-300",onClick:u,children:"X"})}),e.jsxs("div",{className:"mt-4",children:[e.jsx("h1",{className:"text-2xl font-bold text-center text-gray-800 mb-6",children:"Update Fee Topic"}),e.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{htmlFor:"TopicName",className:"block text-lg font-medium text-gray-800 mb-1",children:"Topic Name"}),e.jsx("input",{type:"text",id:"TopicName",name:"TopicName",value:i==null?void 0:i.TopicName,onChange:p,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:border-indigo-100",required:!0})]}),e.jsx("div",{className:"md:col-span-2 flex flex-wrap justify-end gap-4",children:m?e.jsx(R,{}):e.jsx("button",{type:"submit",onClick:d,className:"px-6 py-3 bg-blue-900 text-white text-sm rounded-lg shadow-lg hover:bg-green-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-all duration-300",children:"Update"})})]})]})]})})})})}function z({handleSeeAllModal:u,data:t,index:c}){return e.jsx(e.Fragment,{children:e.jsx("div",{className:"fixed inset-0 z-20 bg-black bg-opacity-75 flex justify-center items-center",children:e.jsxs("div",{className:"p-6 m-4 sm:max-w-[50%] bg-white border rounded-lg shadow-md hover:shadow-lg transition-all duration-300 ",children:[e.jsx("div",{className:"flex justify-end -mt-4",children:e.jsx("button",{className:"text-2xl text-indigo-700 font-extrabold hover:text-red-300",onClick:u,children:"X"})}),e.jsx("h3",{className:"text-2xl font-semibold text-gray-800",children:`${c+1}.   ${t.TopicName}`}),e.jsx("div",{className:"mt-4",children:e.jsx("span",{className:`inline-block px-4 py-1 rounded-full text-white text-sm font-medium ${t.IsActive?"bg-green-500":"bg-red-500"}`,children:t.IsActive?"Active":"Blocked"})})]})})})}function K({index:u,data:t,setOriginalData:c}){const m=L(),[i,r]=n.useState(!1),[p,d]=n.useState(!1),[f,j]=n.useState(!1),[h,v]=n.useState(!1),g=()=>{d(!p)},a=()=>{j(!f)},y=()=>{v(!h)},N=async()=>{try{r(!0),(await I.delete(`/feeTopic/Block/${t.TopicId}`)).status==200&&(c(o=>o.filter(x=>x.TopicId!==t.TopicId)),g(),F("Data Blocked Successfully","success"))}catch(b){C(b,m)}finally{r(!1)}},A=async b=>{try{r(!0);const o=await I.put("/feeTopic/update",b);if(o.status==200){const x=await o.data;c(w=>w.map(S=>S.TopicId===x.TopicId?x:S)),a(),F("Fee Topic Updated Successfully","success")}}catch(o){C(o,m)}finally{r(!1)}};return e.jsxs(e.Fragment,{children:[e.jsxs("tr",{children:[e.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:u+1}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:(t==null?void 0:t.TopicName.length)>25?`${t.TopicName.slice(0,25)} ...`:t.TopicName}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-center",children:e.jsx("span",{className:`px-6 py-4 w-fit inline-flex justify-center text-base leading-5 font-semibold rounded-full ${t.IsActive?"bg-green-100":"bg-red-200"} text-black`,children:t.IsActive?"Active":"Blocked"})}),e.jsxs("td",{className:"px-3 py-2 whitespace-nowrap text-center",children:[t.IsActive&&e.jsx("button",{title:"Edit",onClick:a,className:"px-2 py-1 font-medium text-white bg-blue-600 rounded-md hover:bg-blue-500 focus:outline-none focus:shadow-outline-blue active:bg-blue-600 transition duration-150 ease-in-out",children:e.jsx("i",{className:"bx bx-edit text-2xl"})}),t.IsActive&&e.jsx("button",{title:"Block",onClick:g,className:"ml-2 px-2 py-1 font-medium text-white bg-red-600 rounded-md hover:bg-red-500 focus:outline-none focus:shadow-outline-red active:bg-red-600 transition duration-150 ease-in-out",children:e.jsx("i",{className:"bx bx-block text-2xl"})}),e.jsx("button",{title:"See Details",onClick:y,className:"ml-2 px-2 py-1 font-medium text-white bg-green-600 rounded-md hover:bg-green-500 focus:outline-none focus:shadow-outline-green active:bg-green-600 transition duration-150 ease-in-out",children:e.jsx("i",{className:"bx bx-info-circle text-2xl"})})]})]}),e.jsxs("tr",{children:[p&&e.jsx("td",{children:e.jsx(q,{handleModal:g,deleteHandle:N,name:t==null?void 0:t.TopicName,isBeingProcessed:i})}),f&&e.jsx("td",{children:e.jsx(H,{handleEditModal:a,data:t,updateHandle:A,isBeingProcessed:i})}),h&&e.jsx("td",{children:e.jsx(z,{index:u,handleSeeAllModal:y,data:t})})]})]})}function V({index:u,data:t,setOriginalData:c}){var b;const m=L(),[i,r]=n.useState(!1),[p,d]=n.useState(!1),[f,j]=n.useState(!1),[h,v]=n.useState(!1),g=()=>{d(!p)},a=()=>{j(!f)},y=()=>{v(!h)},N=async()=>{try{r(!0),(await I.delete(`/feeTopic/Block/${t.TopicId}`)).status==200&&(c(x=>x.filter(w=>w.TopicId!==t.TopicId)),g(),F("Data Blocked Successfully","success"))}catch(o){C(o,m)}finally{r(!1)}},A=async o=>{try{r(!0);const x=await I.put("/feeTopic/update",o);if(x.status==200){const w=await x.data;c(S=>S.map(B=>B.TopicId===w.TopicId?w:B)),a(),F("Fee Topic Updated Successfully","success")}}catch(x){C(x,m)}finally{r(!1)}};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"p-6 m-4 bg-white border rounded-lg shadow-md hover:shadow-lg transition-all duration-300 ",children:[e.jsx("h3",{className:"text-2xl font-semibold text-gray-800",children:`${u+1}.   ${((b=t==null?void 0:t.TopicName)==null?void 0:b.length)>15?`${t.TopicName.slice(0,15)} ...`:t.TopicName}`}),e.jsx("div",{className:"mt-4",children:e.jsx("span",{className:`inline-block px-4 py-1 rounded-full text-white text-sm font-medium ${t.IsActive?"bg-green-500":"bg-red-500"}`,children:t.IsActive?"Active":"Blocked"})}),e.jsxs("div",{className:"mt-6 flex justify-start gap-2",children:[t.IsActive&&e.jsx("button",{title:"Edit",onClick:a,className:"px-2 py-1 font-medium text-white bg-blue-600 rounded-md hover:bg-blue-500 focus:outline-none focus:shadow-outline-blue active:bg-blue-600 transition duration-150 ease-in-out",children:e.jsx("i",{className:"bx bx-edit text-2xl"})}),t.IsActive&&e.jsx("button",{title:"Block",onClick:g,className:"px-2 py-1 font-medium text-white bg-red-600 rounded-md hover:bg-red-500 focus:outline-none focus:shadow-outline-red active:bg-red-600 transition duration-150 ease-in-out",children:e.jsx("i",{className:"bx bx-block text-2xl"})}),e.jsx("button",{title:"See Details",onClick:y,className:"px-2 py-1 font-medium text-white bg-green-600 rounded-md hover:bg-green-500 focus:outline-none focus:shadow-outline-green active:bg-green-600 transition duration-150 ease-in-out",children:e.jsx("i",{className:"bx bx-info-circle text-2xl"})})]})]}),p&&e.jsx(q,{handleModal:g,deleteHandle:N,name:t==null?void 0:t.TopicName,isBeingProcessed:i}),f&&e.jsx(H,{handleEditModal:a,data:t,updateHandle:A,isBeingProcessed:i}),h&&e.jsx(z,{index:u,handleSeeAllModal:y,data:t})]})}function W({setInsertModalOpen:u,setOriginalData:t}){const c=L(),[m,i]=n.useState(!1),[r,p]=n.useState({TopicName:"",OfficeName:""}),d=j=>{p({...r,[j.target.name]:j.target.value})},f=async j=>{if(j.preventDefault(),!r.TopicName.trim()){F("Topic Name is required!","error");return}try{i(!0);const h=await I.post("/feeTopic/insert",r);if(h.status==200){const v=await h.data;t(g=>[...g,v]),u(!1),F("Fee Topic Inserted Successfully","success")}}catch(h){C(h,c)}finally{i(!1)}};return e.jsx(e.Fragment,{children:e.jsx("div",{className:"fixed inset-0 z-20 bg-black bg-opacity-75 flex justify-center items-center",children:e.jsx("div",{className:"flex mx-auto w-full justify-center",children:e.jsxs("div",{className:"w-full border sm:max-w-xl bg-white border-indigo-400 m-4 p-4 sm:m-10",children:[e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{className:"close-btn text-2xl text-indigo-700 font-extrabold hover:text-red-300",onClick:()=>u(!1),children:"X"})}),e.jsxs("div",{className:"mt-4",children:[e.jsx("h1",{className:"text-2xl font-bold text-center text-gray-800 mb-6",children:"Insert Fee Topic"}),e.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{htmlFor:"TopicName",className:"block text-lg font-medium text-gray-800 mb-1",children:"Topic Name"}),e.jsx("input",{type:"text",id:"TopicName",name:"TopicName",onChange:d,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:border-indigo-100",required:!0})]}),e.jsxs("div",{className:"md:col-span-2 flex flex-wrap justify-end gap-4",children:[e.jsx("button",{type:"reset",className:"px-6 py-3 bg-red-700 text-white text-sm rounded-lg shadow-lg hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 transition-all duration-300",children:"Clear"}),m?e.jsx(R,{}):e.jsx("button",{type:"submit",onClick:f,className:"px-6 py-3 bg-blue-900 text-white text-sm rounded-lg shadow-lg hover:bg-green-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-all duration-300",children:"Insert"})]})]})]})]})})})})}function se(){const u=L(),[t,c]=n.useState([]),[m,i]=n.useState([]),[r,p]=n.useState(!1),[d,f]=n.useState(!1),[j,h]=n.useState(!1),[v,g]=n.useState(""),[a,y]=n.useState("default"),[N,A]=n.useState("default"),[b,o]=n.useState(1),[x]=n.useState(10),[w,S]=n.useState(!1),B=()=>{if(!j&&!d)X();else{const s=d?t.filter(l=>l.IsActive):t.filter(l=>!l.IsActive);i(s)}f(!d),o(1)},G=async()=>{try{p(!0);const l=await(await I.get("/FeeTopic/GetList")).data;c(l),i(l)}catch(s){C(s,u)}finally{p(!1)}},X=async()=>{try{p(!0);const l=await(await I.get("/FeeTopic/GetList/true")).data;c(l),i(l.filter(k=>!k.IsActive)),h(!0)}catch(s){C(s,u)}finally{p(!1)}};n.useEffect(()=>{y("default"),A("default"),g("")},[d]),n.useEffect(()=>{document.title="FeeTopic List",G()},[]),n.useEffect(()=>{const s=d?t.filter(l=>!l.IsActive):t.filter(l=>l.IsActive);i(s)},[d,t]);const Q=s=>{const l=s.target.value.toLowerCase();g(l);const M=(d?t.filter(T=>!T.IsActive):t.filter(T=>T.IsActive)).filter(T=>Object.values(T).some(O=>O.toString().toLowerCase().includes(l)));i(M),o(1)},_=()=>{let s=[...m];N==="default"&&a==="default"||(a&&(s=m.filter(l=>{var k;return(k=l[a])==null?void 0:k.toString().toLowerCase().includes(v.toLowerCase())})),N&&a&&s.sort((l,k)=>{var O,U;const M=(O=l[a])==null?void 0:O.toString().toLowerCase(),T=(U=k[a])==null?void 0:U.toString().toLowerCase();return M<T?N==="asc"?-1:1:M>T?N==="asc"?1:-1:0}),i(s),o(1))};n.useEffect(()=>{_()},[a,N,v]);const P=b*x,E=P-x,D=m.slice(E,P),$=Math.ceil(m.length/x);return e.jsx(e.Fragment,{children:r?e.jsx(J,{}):e.jsxs("div",{className:"overflow-x-auto",children:[e.jsxs("div",{className:"flex justify-center min-[750px]:justify-end gap-8",children:[e.jsxs("button",{onClick:()=>S(!0),className:"bg-green-700 text-white p-4 rounded-xl flex gap-2 items-center",children:[e.jsx("i",{className:"bx bx-plus-medical"}),"Insert"]}),w&&e.jsx(W,{setInsertModalOpen:S,setOriginalData:c}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",className:"rounded-xl w-4 h-4 cursor-pointer",onChange:B,checked:d}),e.jsx("p",{children:"Show Blocked"})]})]}),e.jsx("div",{className:"text-3xl text-center",children:"All Fee Topic List"}),e.jsxs("div",{className:"flex justify-between items-center mt-4 gap-4 flex-wrap w-full",children:[e.jsx("input",{type:"text",className:"border p-2 rounded w-screen min-[440px]:w-auto",placeholder:"Search...",value:v,onChange:Q}),e.jsxs("select",{className:"border p-2 rounded cursor-pointer",onChange:s=>y(s.target.value),value:a,children:[e.jsx("option",{value:"default",disabled:!0,children:"--Filter by Column--"}),e.jsx("option",{value:"TopicName",children:"Topic Name"})]}),e.jsxs("select",{className:"border p-2 rounded cursor-pointer",onChange:s=>A(s.target.value),value:N,children:[e.jsx("option",{value:"default",disabled:!0,children:"--Sort Order--"}),e.jsx("option",{value:"asc",disabled:a==="default",className:a==="default"?"text-red-400":"",children:"Ascending"}),e.jsx("option",{value:"desc",disabled:a==="default",className:a==="default"?"text-red-400":"",children:"Descending"})]})]}),e.jsxs("table",{className:"min-w-full divide-y hidden min-[750px]:table divide-gray-200",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"S.N"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Fee Topic"}),e.jsx("th",{className:"px-3 py-2 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-3 py-2 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Action"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:D.length===0?e.jsx("tr",{children:e.jsx("td",{className:"text-3xl bg-red-200 py-20 text-center rounded-3xl",colSpan:5,children:"No data available"})}):D.map((s,l)=>e.jsx(K,{index:E+l,data:s,setOriginalData:c},s.TopicId))})]}),e.jsx("div",{className:"min-[750px]:hidden flex flex-col",children:D.length===0?e.jsx("p",{className:"text-3xl bg-red-200 py-20 text-center rounded-3xl",children:"No data available"}):D.map((s,l)=>e.jsx(V,{index:E+l,data:s,setOriginalData:c},s.TopicId))}),e.jsxs("div",{className:"flex justify-between items-center mt-4",children:[e.jsx("button",{disabled:b===1,onClick:()=>o(s=>s-1),className:"p-2 border rounded disabled:bg-blue-300 bg-blue-600 disabled:hover:bg-blue-300 text-white hover:bg-blue-800 ",children:"Previous"}),e.jsx("div",{className:"flex gap-2",children:Array.from({length:$},(s,l)=>e.jsx("button",{onClick:()=>o(l+1),className:`p-2 border rounded ${b===l+1?"bg-blue-600 text-white":"hover:bg-blue-800 hover:text-white"}`,children:l+1},l+1))}),e.jsx("button",{disabled:b===$,onClick:()=>o(s=>s+1),className:"p-2 border rounded disabled:bg-blue-300 bg-blue-600 disabled:hover:bg-blue-300 text-white hover:bg-blue-800",children:"Next"})]})]})})}export{se as default};
